{"version":3,"sources":["components/Note.js","components/Notification.js","components/LoginForm.js","components/NoteForm.js","components/Togglable.js","components/Footer.js","services/notes.js","services/login.js","App.js","index.js"],"names":["Note","note","toggleImportance","label","important","className","content","onClick","Notification","message","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","username","password","onSubmit","id","value","onChange","type","NoteForm","createNote","useState","newNote","setNewNote","event","preventDefault","target","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","buttonLabel","children","displayName","Footer","color","fontStyle","fontSize","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","update","put","setToken","newToken","login","credentials","App","notes","setNotes","showAll","setShowAll","errorMessage","setErrorMessage","setUsername","setPassword","user","setUser","noteFormRef","createRef","useEffect","noteService","initialNotes","loggedUserJSON","window","localStorage","getItem","JSON","parse","addNote","noteObject","current","returnedNote","concat","handleLogin","loginService","setItem","stringify","setTimeout","notesToShow","filter","name","map","i","find","n","changedNote","catch","toggleImportanceOf","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aa5e8751.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Note = ({ note, toggleImportance }) => {\r\n    const label = note.important\r\n        ? 'make not important' : 'make important'\r\n\r\n    return (\r\n        <li className='note'>\r\n            <span>{note.content}</span>\r\n            <button onClick={toggleImportance}>{label}</button>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Note","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst LoginForm = ({\r\n    handleSubmit,\r\n    handleUsernameChange,\r\n    handlePasswordChange,\r\n    username,\r\n    password\r\n}) => {\r\n    return (\r\n        <div>\r\n            <h2>Login</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <div>\r\n                    username\r\n                    <input\r\n                        id='username'\r\n                        value={username}\r\n                        onChange={handleUsernameChange}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    password\r\n                    <input\r\n                        id='password'\r\n                        type=\"password\"\r\n                        value={password}\r\n                        onChange={handlePasswordChange}\r\n                    />\r\n                </div>\r\n                <button id=\"login-button\" type=\"submit\">login</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nLoginForm.propTypes = {\r\n    handleSubmit: PropTypes.func.isRequired,\r\n    handleUsernameChange: PropTypes.func.isRequired,\r\n    handlePasswordChange: PropTypes.func.isRequired,\r\n    username: PropTypes.string.isRequired,\r\n    password: PropTypes.string.isRequired\r\n}\r\n\r\nexport default LoginForm","import React, { useState } from 'react'\r\n\r\nconst NoteForm = ({ createNote }) => {\r\n    const [newNote, setNewNote] = useState('')\r\n\r\n    const handleChange = (event) => {\r\n        setNewNote(event.target.value)\r\n    }\r\n\r\n    const addNote = (event) => {\r\n        event.preventDefault()\r\n        createNote({\r\n            content: newNote,\r\n            important: false\r\n        })\r\n\r\n        setNewNote('')\r\n    }\r\n\r\n    return (\r\n        <div className=\"formDiv\">\r\n            <h2>Create a new note</h2>\r\n\r\n            <form onSubmit={addNote}>\r\n                <input\r\n                    value={newNote}\r\n                    onChange={handleChange}\r\n                />\r\n                <button type=\"submit\">save</button>\r\n            </form>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default NoteForm","import React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n    const [visible, setVisible] = useState(false)\r\n\r\n    const hideWhenVisible = { display: visible ? 'none' : '' }\r\n    const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n    const toggleVisibility = () => {\r\n        setVisible(!visible)\r\n    }\r\n\r\n    useImperativeHandle(ref, () => {\r\n        return {\r\n            toggleVisibility\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <div style={hideWhenVisible}>\r\n                <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n            </div>\r\n            <div style={showWhenVisible} className=\"togglableContent\">\r\n                {props.children}\r\n                <button onClick={toggleVisibility}>cancel</button>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\nTogglable.propTypes = {\r\n    buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable","import React from 'react'\r\n\r\nconst Footer = () => {\r\n    const footerStyle = {\r\n        color: 'green',\r\n        fontStyle: 'italic',\r\n        fontSize: 16\r\n    }\r\n\r\n    return (\r\n        <div style={footerStyle}>\r\n            <br />\r\n            <em>Note app, Department of Computer Science, University of Helsinki 2021</em>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","import axios from 'axios'\r\nconst baseUrl = '/api/notes'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n    token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n    const config = {\r\n        headers: { Authorization: token },\r\n    }\r\n\r\n    const response = await axios.post(baseUrl, newObject, config)\r\n    return response.data\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, setToken }","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n    const response = await axios.post(baseUrl, credentials)\r\n    return response.data\r\n}\r\n\r\nexport default { login }","import React, { useState, useEffect } from 'react'\r\nimport Note from './components/Note'\r\nimport Notification from './components/Notification'\r\nimport LoginForm from './components/LoginForm'\r\nimport NoteForm from './components/NoteForm'\r\nimport Togglable from './components/Togglable'\r\nimport Footer from './components/Footer'\r\nimport noteService from './services/notes'\r\nimport loginService from './services/login'\r\n\r\nconst App = () => {\r\n    const [notes, setNotes] = useState([])\r\n    const [showAll, setShowAll] = useState(true)\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [user, setUser] = useState(null)\r\n\r\n    const noteFormRef = React.createRef()\r\n\r\n    useEffect(() => {\r\n        noteService\r\n            .getAll()\r\n            .then(initialNotes => {\r\n                setNotes(initialNotes)\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\r\n        if (loggedUserJSON) {\r\n            const user = JSON.parse(loggedUserJSON)\r\n            setUser(user)\r\n            noteService.setToken(user.token)\r\n        }\r\n    }, [])\r\n\r\n    const addNote = (noteObject) => {\r\n        noteFormRef.current.toggleVisibility()\r\n        noteService\r\n            .create(noteObject)\r\n            .then(returnedNote => {\r\n                setNotes(notes.concat(returnedNote))\r\n            })\r\n    }\r\n\r\n    const toggleImportanceOf = (id) => {\r\n        const note = notes.find(n => n.id === id)\r\n        const changedNote = { ...note, important: !note.important }\r\n\r\n        noteService\r\n            .update(id, changedNote)\r\n            .then(returnedNote => {\r\n                setNotes(notes.map(note => note.id !== id ? note : returnedNote))\r\n            })\r\n            .catch(() => {\r\n                setErrorMessage(\r\n                    `Note '${note.content}' was already removed from the server`\r\n                )\r\n                setTimeout(() => {\r\n                    setErrorMessage(null)\r\n                }, 5000)\r\n            })\r\n    }\r\n\r\n    const handleLogin = async (event) => {\r\n        event.preventDefault()\r\n        try {\r\n            const user = await loginService.login({\r\n                username, password,\r\n            })\r\n\r\n            window.localStorage.setItem(\r\n                'loggedNoteappUser', JSON.stringify(user)\r\n            )\r\n\r\n            noteService.setToken(user.token)\r\n            setUser(user)\r\n            setUsername('')\r\n            setPassword('')\r\n        }\r\n        catch (exception) {\r\n            setErrorMessage('wrong credentials')\r\n            setTimeout(() => {\r\n                setErrorMessage(null)\r\n            }, 5000)\r\n        }\r\n    }\r\n\r\n    const loginForm = () => (\r\n        <Togglable buttonLabel='login'>\r\n            <LoginForm\r\n                username={username}\r\n                password={password}\r\n                handleUsernameChange={({ target }) => setUsername(target.value)}\r\n                handlePasswordChange={({ target }) => setPassword(target.value)}\r\n                handleSubmit={handleLogin}\r\n            />\r\n        </Togglable>\r\n    )\r\n\r\n    const noteForm = () => (\r\n        <Togglable buttonLabel=\"new note\" ref={noteFormRef}>\r\n            <NoteForm createNote={addNote} />\r\n        </Togglable>\r\n    )\r\n\r\n    const notesToShow = showAll\r\n        ? notes\r\n        : notes.filter(note => note.important)\r\n\r\n    return (\r\n        <div>\r\n            <h1>Notes</h1>\r\n            <Notification message={errorMessage} />\r\n\r\n            {user === null\r\n                ? loginForm()\r\n                : <div>\r\n                    <p>{user.name} logged in</p>\r\n                    {noteForm()}\r\n                </div>\r\n            }\r\n\r\n            <div>\r\n                <button onClick={() => setShowAll(!showAll)}>\r\n                    show {showAll ? 'important' : 'all'}\r\n                </button>\r\n            </div>\r\n            <ul>\r\n                {notesToShow.map((note, i) =>\r\n                    <Note\r\n                        key={i}\r\n                        note={note}\r\n                        toggleImportance={() => toggleImportanceOf(note.id)}\r\n                    />\r\n                )}\r\n            </ul>\r\n\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}